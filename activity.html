<!DOCTYPE html>
<html>
    <head>
        <title>XML HTTP Request Acitivity</title>
    </head>
    <body>
        <h2>Displaying Contents from XML File</h2>
        <div>
            <button type="button" onclick="loadXML()">Load XML File</button>
        </div>
        <p id="act"></p>
    </body>


    <!--JavaScript for XML HTTP Request-->
    <script>
        // function to load XML file using new http request
        function loadXML(){

            // create new xml http request object
            var xhttp = new XMLHttpRequest(); 
            
            //open the xml file 
            xhttp.open("GET", "../catalog.xml", true);

            xhttp.send();

            //once xml file is ready, execute new function
            xhttp.onreadystatechange = function(){
                myFunction(this);
            };
        }

        // xmlFunction
        // function to know which data will be displayed
        // used for-loop
        function myFunction(xml){  
            // declare variables
            var price, title, idx, xmlDox, txt;

            xmlDox = xml.responseXML;
            txt = " ";
            price = xmlDox.getElementsByTagName("PRICE");
            title = xmlDox.getElementsByTagName("TITLE");

            // for every item until the last using title tag it will increment
            // for every price in the title which value is less than 10
            // display it using txt variable 
            for(idx = 0; idx < title.length; idx++) {
                if (parseFloat(price[idx].childNodes[0].nodeValue) < 10.00) {
                    txt += title[idx].childNodes[0].nodeValue + "<br>";
                }
            }

            //code to show the output 
            document.getElementById("act").innerHTML = txt;
        }

    </script>
</html>
